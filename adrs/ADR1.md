# ADR-001: Выбор архитектуры и основного технологического стека

**Статус:** Принято

## Контекст

Необходимо определить базовую архитектуру и стек технологий для приложения по созданию и ведению писательских миров. Ключевые требования:
*   Современный и удобный пользовательский интерфейс.
*   Основной фокус на создании сущностей (персонажи, локации и т.д.) и отслеживании их взаимосвязей.
*   Обеспечение приватности данных пользователя.
*   Возможность работы в офлайн-режиме.
*   Интеграция с внешними текстовыми редакторами, привычными для пользователя.

## Решение

Мы будем создавать **локальное десктоп-приложение (Local-First)**.

*   **Оболочка приложения:** **Tauri**. Это обеспечит кроссплатформенность, высокую производительность и легковесность по сравнению с альтернативами (Electron).
*   **Хранение данных:** **Файловая система**. Каждая сущность будет представлять собой отдельный текстовый файл (например, Markdown) с метаданными в формате frontmatter. Связи между сущностями будут указываться с помощью текстовых ссылок.
*   **Frontend:** Современный JavaScript-фреймворк (**React** или **Vue.js**) для создания интерактивного интерфейса и визуализации графа связей.

Этот подход напрямую решает задачу интеграции со сторонними редакторами и обеспечивает максимальную приватность данных.

## Рассмотренные варианты

1.  **Классическое веб-приложение (SaaS):**
    *   **Технологии:** React/Vue + Node.js/Python + PostgreSQL/Neo4j.
    *   **Причина отказа:** Не соответствует требованиям по работе офлайн и приватности данных. Многие писатели предпочитают хранить свои наработки локально.

2.  **Гибридное приложение (PWA / с синхронизацией):**
    *   **Технологии:** Веб-стек с Service Workers и IndexedDB для офлайн-работы или десктоп-приложение с облачной синхронизацией.
    *   **Причина отказа:** Значительно более высокая сложность реализации, особенно в части разрешения конфликтов синхронизации. Это может быть рассмотрено в будущем как расширение функциональности, но не для первоначальной версии.

3.  **Десктоп-приложение с встроенной БД:**
    *   **Технологии:** Tauri/Electron + SQLite.
    *   **Причина отказа:** Хотя это жизнеспособный вариант, подход с файловой системой обеспечивает большую прозрачность для пользователя и более тесную, естественную интеграцию с внешними редакторами.

## Последствия

*   **Положительные:**
    *   Пользователь полностью владеет своими данными.
    *   Приложение работает без подключения к интернету.
    *   Данные хранятся в простом и читаемом текстовом формате, что гарантирует их доступность в будущем.
    *   Нативное ощущение и высокая производительность благодаря Tauri.

*   **Отрицательные:**
    *   Реализация функций совместной работы значительно усложняется и откладывается.
    *   Пользователю необходимо устанавливать приложение на свой компьютер.
