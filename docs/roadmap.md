# План развития проекта (Roadmap)

Этот документ описывает ключевые функциональные возможности проекта и предлагает скорректированный поэтапный план их реализации с учетом последних обсуждений.

## Основные фичи проекта

- **Управление сущностями:** Полный цикл операций (CRUD) для сущностей (персонажей, локаций, глав и т.д.).
- **Система типов:** Возможность определять пользовательские типы сущностей с настраиваемыми наборами полей (схемами).
- **Редактирование контента:**
  - Базовый встроенный редактор для быстрых правок.
  - **Интеграция с внешними редакторами:** Возможность открыть любой текстовый файл сущности (`.md`) в предпочитаемом пользователем приложении.
  - Удобный UI для редактирования метаданных (`meta.yml`) на основе типа сущности.
- **Инструменты для повествования:**
  - Иерархическое представление и управление порядком глав, эпизодов, сцен.
  - Механизм создания и управления связями между сущностями.
  - **Сбор заметок из текста:** Функция для выделения фрагмента в повествовании и отправки его в файл `notes.md` к связанной сущности.
- **Расширенные возможности:**
  - Глобальный поиск по всему проекту.
  - Визуализация связей в виде интерактивного графа.

---

## Поэтапный план внедрения

### Этап 1: Фундамент и ядро приложения

*Цель: Создать минимально жизнеспособное приложение, позволяющее управлять сущностями и редактировать их с помощью внешних инструментов.*

1. **Настройка проекта:** Инициализация проекта на Tauri и React, настройка связи между фронтендом и бэкендом.
2. **Базовый файловый бэкенд:** Реализация в Rust основных команд для CRUD-операций с папками-сущностями и файлами внутри них.
3. **Просмотр и навигация:** Создание UI для отображения списка сущностей и просмотра их текстового содержимого.
4. **Базовый редактор и вызов внешнего редактора:** Реализация простого встроенного текстового поля для быстрых правок и ключевой функции "Открыть во внешнем редакторе" для всех `.md` файлов.

### Этап 2: Система типов и удобное редактирование метаданных

*Цель: Перейти от редактирования сырых файлов к структурированной и удобной работе с типизированными данными.*

1. **Реализация системы типов:** Бэкенд и UI начинают работать с полем `type` в `meta.yml` для определения сущности.
2. **Динамические формы метаданных:** Замена простого текстового поля для `meta.yml` на UI, который автоматически генерирует поля ввода на основе типа сущности.
3. **UI для планов и заметок:** Реализация вкладок "План" и "Заметки", которые отображают содержимое `plan.md` и `notes.md` и позволяют открыть их во внешнем редакторе.

### Этап 3: Специализированные функции для повествования

*Цель: Внедрить инструменты, которые напрямую помогают в написании и структурировании историй.*

1. **Иерархический вид повествования:** Создание отдельного раздела UI ("Дерево истории"), где можно визуально выстраивать и изменять порядок глав и сцен с помощью drag-and-drop.
2. **Система связей (Отношения):** Разработка интерфейса для создания, просмотра и редактирования связей между сущностями.
3. **Функция "Отправить в заметки":** Реализация контекстного меню или горячей клавиши в текстовом редакторе для выделения текста и отправки его в `notes.md` выбранной сущности.

### Этап 4: Расширенные возможности и полировка

*Цель: Добавить мощные инструменты для анализа и навигации по миру, а также улучшить общее удобство использования.*

1. **Глобальный поиск:** Реализация на бэкенде (Rust) эффективного движка для поиска по всем файлам проекта и вывод результатов в UI.
2. **Визуализация графа связей:** Создание интерактивного графа, который наглядно показывает все связи между сущностями и позволяет перемещаться по нему.
3. **Панель управления (Dashboard):** Разработка стартового экрана проекта, отображающего ключевую статистику, последние измененные сущности и быстрый доступ к основным разделам.

### Фичи в проработке (последовательность не имеет значения)

1. **Временная привязка повествования:** Ввести временную шкалу и добавить возможность привязки к ней повествования и объектов (например, для быстрого отслеживания существования объекта в описываемый период)
2. **Система фактов:** Ввести систему фактов о мире/объектах/локациях/персонажах для автоматизации проверки согласованности на основе RAG системы.
3. **Автоматизированные проверки:** На основе знаний о мире и событиях проверять на логические и смысловые ошибки повествование.
4. **Миграция сущностей:** Система миграции сущностей между проектами.
5. **Система тегов:** Дополнить объекты произвольными тегами или ярлыками для группировки по признакам пользователя и удобная система работы с этими тегами.
